---
title: "Calculator App in Android Studio(3)"
description: >-
    ì•ˆë“œë¡œì´ë“œ ìŠ¤íŠœë””ì˜¤ë¥¼ ì´ìš©í•˜ì—¬ ê³„ì‚°ê¸° ì•± ë§Œë“¤ê¸° í”„ë¡œì íŠ¸
    MainAcitivity.kt 
    Infix -> Postfix ì•Œê³ ë¦¬ì¦˜ 

date: 2025-08-31 01:00
author: sio2
categories: [Android Studio, Calculator]
tags: [Android Studio, Calculator]
---


# ì‹¤í–‰ í™”ë©´ 
ê°¤ëŸ­ì‹œ S23+ ì‹¤í–‰ í™”ë©´

![Calculator_ì‹¤í–‰í™”ë©´01](/assets/img/Calculator/calculator02.gif) 
<br />
![Calculator_ì‹¤í–‰í™”ë©´02](/assets/img/Calculator/calculator03.gif) 

<br />
<br />
<br /> 


# ì½”ë“œ í•´ì„¤
---

## **onCreate í•¨ìˆ˜** 
### 1. solutionTV, resultTV ì´ˆê¸°í™” 
``` 
solutionTV = findViewById(R.id.solution_tv)
resultTV = findViewById(R.id.result_tv)
```

### 2. ìˆ«ì ë° ì—°ì‚°ì ë²„íŠ¼ ì´ˆê¸°í™” 
```
        val buttonsIds = listOf(
            R.id.button_0, R.id.button_1, R.id.button_2, ....
            R.id.button_openBracket, R.id.button_closeBracket, ....
        )

        for (id in buttonsIds) {
            val button = findViewById<Button>(id)
            button.setOnClickListener {
                val text = button.text.toString()
                appendToExpression(text)
            }
        }
``` 

### 3. AC ë²„íŠ¼ê³¼ CE ë²„íŠ¼ 
```
        // AC ë²„íŠ¼ - ì…ë ¥ê°’, ê²°ê³¼ê°’ ëª¨ë‘ ì‚­ì œ 
        val acButton = findViewById<Button>(R.id.button_ac)
        acButton.setOnClickListener {
            solutionTV.text = ""
            resultTV.text = "0"
        }

        // CE ë²„íŠ¼ - ì…ë ¥ ë§ˆì§€ë§‰ ê¸€ì ì‚­ì œ
        val ceButton = findViewById<Button>(R.id.button_ce)
        ceButton.setOnClickListener {
            val text = solutionTV.text.toString()
            if(text.isNotEmpty()){
                solutionTV.text = text.substring(0, text.length - 1)
            }
        }
```

### 4. = ë²„íŠ¼ 
``` 
        // = ë²„íŠ¼
        val equalsButton = findViewById<Button>(R.id.button_equals)
        equalsButton.setOnClickListener {
            val expression = solutionTV.text.toString()
            try {
                val postfix = infixToPostfix(expression)
                val result = evaluatePostfix(postfix)
                resultTV.text = if (result % 1 == 0.0) result.toInt().toString() else result.toString()
            } catch (e: Exception) {
                resultTV.text = "Error"
            }
        }
```
- í˜„ì¬ ì…ë ¥ëœ ìˆ˜ì‹ì„ postfixë¡œ ë³€í™˜ 
- postfix ì‹ì„ ë°”íƒ•ìœ¼ë¡œ ê³„ì‚° 
- ê³„ì‚°ëœ ê²°ê³¼ê°’ì„ ì¶œë ¥ 


--------

## **infixToPostfix í•¨ìˆ˜** 
```
    private fun infixToPostfix(expression: String): List<String> {
        val output = mutableListOf<String>()
        val stack = _root_ide_package_.java.util.Stack<String>()
        val tokens = tokenize(expression)

        for (token in tokens) {
            when {
                token.toDoubleOrNull() != null -> output.add(token) // ìˆ«ìë©´ ì¶œë ¥
                token == "(" -> stack.push(token)
                token == ")" -> {
                    while (stack.isNotEmpty() && stack.peek() != "(") {
                        output.add(stack.pop())
                    }
                    if (stack.isNotEmpty() && stack.peek() == "(") stack.pop()
                }
                else -> {
                    while (stack.isNotEmpty() && precedence(stack.peek()) >= precedence(token)) {
                        output.add(stack.pop())
                    }
                    stack.push(token)
                }
            }
        }
        while (stack.isNotEmpty()) output.add(stack.pop())
        return output
    }
```
1. ìˆ«ìëŠ” 'token.toDoubleOrNUll() != null'ì— ë”°ë¼ ë°”ë¡œ outputì— ì¶”ê°€ -> ìˆ«ìëŠ” ìˆœì„œë§Œ ì§€í‚¤ë©´ ë˜ê¸° ë•Œë¬¸
2. '('ê°€ ë“±ì¥í•˜ë©´ ì´í›„ì— ë‚˜ì˜¤ëŠ” ì—°ì‚°ìë“¤ì€ ')'ê°€ ë‚˜ì˜¤ê¸° ì „ê¹Œì§€ ìŠ¤íƒì— push 
3. ')'ê°€ tokenìœ¼ë¡œ ë‚˜ì˜¤ë©´ ìŠ¤íƒì—ì„œ '('ê°€ ë‚˜ì˜¬ ë•Œê¹Œì§€ outputì— ì¶”ê°€ -> ê·¸ëŸ° ë‹¤ìŒ '('ëŠ” ë²„ë¦¼ 
4. ìŠ¤íƒì˜ topì— ìì‹ ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ê±°ë‚˜ ê°™ì€ ì—°ì‚°ìê°€ ìˆìœ¼ë©´ ê·¸ ì—°ì‚°ìë“¤ì„ ëª¨ë‘ pop -> outputì— ì¶”ê°€ 

----

## **evaluatePostfix í•¨ìˆ˜** 
``` 
    private fun evaluatePostfix(postfix: List<String>): Double {
        val stack = Stack<Double>()
        for (token in postfix) {
            val num = token.toDoubleOrNull()
            if (num != null) {
                stack.push(num)
            } else {
                val b = stack.pop()
                val a = stack.pop()
                val res = when (token) {
                    "+" -> a + b
                    "-" -> a - b
                    "*" -> a * b
                    "/" -> a / b
                    else -> 0.0
                }
                stack.push(res)
            }
        }
        return stack.pop()
    }
``` 
1. í˜„ì¬ tokenì´ ìˆ«ìë¼ë©´ stackì— push
2. ìˆ«ìê°€ ì•„ë‹ˆë¼ë©´ ì—°ì‚°ìë¡œ ê°„ìˆ˜ 
    - b = ë¨¼ì € êº¼ë‚¸ ìˆ«ì / a = ë‚˜ì¤‘ì— êº¼ë‚¸ ìˆ«ì
    - when(token)ì˜ ì—°ì‚°ìì— ë”°ë¼ì„œ ê³„ì‚°
3. 2ì˜ ê³„ì‚° ê²°ê³¼ë¥¼ push 
4. ëª¨ë“  í† í° ì²˜ë¦¬ í›„ ìµœì¢… ê²°ê³¼ ë°˜í™˜

----

## **tokenize í•¨ìˆ˜**
```
    private fun tokenize(expr: String): List<String> {
        val tokens = mutableListOf<String>()
        var number = ""
        var prev: String? = null

        for (c in expr) {
            if (c.isDigit() || c == '.') {
                number += c
            } else {
                if (number.isNotEmpty()) {
                    tokens.add(number)
                    number = ""
                }
                // unary minus ì²˜ë¦¬ (ë§¨ ì²˜ìŒ ë˜ëŠ” '(' ë’¤ì— ë‚˜ì˜¤ëŠ” '-')
                if (c == '-' && (prev == null || prev in listOf("(", "+", "-", "*", "/"))) {
                    number = "-" // unaryë¼ë©´ ìˆ«ìì— ë¶€í˜¸ ë¶™ì„
                } else {
                    tokens.add(c.toString())
                }
            }
            prev = c.toString()
        }
        if (number.isNotEmpty()) tokens.add(number)
        return tokens
    }
```
1. ìˆ«ìë‚˜ ì†Œìˆ˜ì ì´ë¼ë©´ numberì— ëˆ„ì 
2. ìˆ«ìê°€ ì•„ë‹Œ ë¬¸ìê°€ ë‚˜ì˜¤ë©´
    - ë§Œì•½ numberì— ê°’ì´ ìˆìœ¼ë©´ ê·¸ê±¸ tokenì— ì¶”ê°€í•˜ê³  number ì´ˆê¸°í™” 
    - ì´í›„ í˜„ì¬ ë¬¸ìê°€ '-'ì´ê³ , ì´ì „ ë¬¸ìê°€ ì—†ê±°ë‚˜ ë‹¤ë¥¸ ì—°ì‚°ì ì¤‘ í•˜ë‚˜ì´ë©´ ë‹¨í•­ ìŒìˆ˜ë¡œ íŒë‹¨ -> ë‹¤ìŒì— ì˜¤ëŠ” ìˆ«ìì— '-'ê°€ ë¶™ìŒ 
    - ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ë¬¸ì ê·¸ëŒ€ë¡œ í† í°ì— ì¶”ê°€ 
-----

<br />

ì´ìƒ Calculator Project ë!   
github ë†€ëŸ¬ì˜¤ì„¸ìš©ğŸ¤—ğŸ³ 
[Calculator Github](https://github.com/choisio2/Calculator_Project.git)

<br /><br /><br />
 
